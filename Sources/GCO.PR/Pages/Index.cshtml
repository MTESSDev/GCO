@page "{handler?}"
@model GCO.PR.Pages.GCOIndexModel
@{
    ViewData["Title"] = "Liste des gabarits";
    ViewData["CacherIdentification"] = true;
    ViewData["CacherOnglets"] = true;
    ViewData["CacherLien"] = true;
    ViewData["CacherChangementLangue"] = true;
}

@section style{
    <style>

        #tableGabarits td.lien {
            padding: 0;
        }

        #tableGabarits td.lien a {
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-decoration: none;
            padding: 16px 16px 16px 8px;
        }

        #tableGabarits .objet {
            font-family: 'OpenSans-Bold';
            color: var(--couleur-texte-liens);
        }

        #tableGabarits .description{
            font-family: 'OpenSans-Regular';
            color: var(--couleur-texte-base);

        }

        #tableGabarits a:hover .objet, #tableGabarits a:focus .objet {
            text-decoration: underline;
        }

    </style>
}

    <div>

        <table id="tableGabarits" summary="Liste des gabarits disponibles" class="table table-hover base">
            <thead>
                <tr>
                    <th class="">Gabarit</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>

@section scripts{

    <script>

        ajouterGabaritsTableau()
        definirDatatable()


        function ajouterGabaritsTableau(){

            const gabarits = obtenirGabarits()
            const sansDescription = "Aucune description disponible."
            let html

            gabarits.forEach((g) => {
                html += `
                <tr>
                    <td class="lien">
                    <a href="/Gabarit?g=${g.code}">
                        <span class="objet">${g.code}<span class="sr-only">.&nbsp;</span></span>
                        <span class="description text-base">${g.desc || sansDescription}</span>
                    </a>
                    </td>
                </tr>`
            })

            $("#tableGabarits").find("tbody").append(html)
        }

        function definirDatatable(){
            const tableGabarits = $("#tableGabarits");

            const table = tableGabarits.DataTable({
                pageLength: 10,
                paging: true,
                searching: true,
                columnDefs: [
                    {
                        targets: 0, render: function (data, type, row) {
                            //Traitement particulier pour le tri. Ne pas conserver la date dans la cellule si la date est invisible (bousille l'ordre de tri par objet)
                            if (type === 'sort') {
                                var contenuCellule = $(data);
                                if (contenuCellule.find(".date:visible").length === 0) {
                                    contenuCellule.find(".date").remove();
                                }
                                return contenuCellule.text();
                            }

                            return data;
                        }
                    }
                ],
                order: [
                    [0, "asc"]
                ]
            });


            table.on( 'draw', function () {
                const body = $( table.table().body() ); 
                body.unhighlight();
                body.highlight( table.search() );  
            });
        }


        function obtenirGabarits(){
            return [{ "code":"ADD", "desc":"Avis de convocation et demande de documents"},
                { "code":"AVI", "desc":"Avis de convocation"},
                { "code":"CER", "desc":"Certificat de recouvrement"},
                { "code":"CE2", "desc":"Certificat de recouvrement"},
                { "code":"C03", "desc":"Exigibilité de la dette"},
                { "code":"C04", "desc":"Succession Confirmation de dette"},
                { "code":"C05", "desc":"Succession Demande de renseignements"},
                { "code":"C06", "desc":"Rappel de votre engagement de remboursement - débit préautorisé"},
                { "code":"C07", "desc":"Rappel de votre engagement de remboursement"},
                { "code":"C08", "desc":"Modification d'une information bancaire"},
                { "code":"C09", "desc":"Proposition d'entente de remboursement"},
                { "code":"C13", "desc":"Réception d'un chèque portant la mention « Paiement final »"},
                { "code":"C14", "desc":"Demande de renseignements débit préautorisé"},
                { "code":"C15", "desc":"Demande de renseignements au sujet d'un chèque"},
                { "code":"C16", "desc":"Rappel de vos obligations"},
                { "code":"C17", "desc":"Confirmation de consentement à une hypothèque"},
                { "code":"C18", "desc":"Annulation de chèques postdatés"},
                { "code":"C20", "desc":"Demande d'attestation d'études"},
                { "code":"C24", "desc":"Renouvellement de chèques postdatés"},
                { "code":"C26", "desc":"Reprise de la procédure de recouvrement"},
                { "code":"C27", "desc":"Retour de chèques"},
                { "code":"C28", "desc":"Identification d'un paiement"},
                { "code":"C29", "desc":"Débit préautorisé non réalisé"},
                { "code":"C35", "desc":"Demande de consentement à une hypothèque"},
                { "code":"C39", "desc":"Avis de compte payé par dépôt volontaire"},
                { "code":"C40", "desc":"Proposition de règlement"},
                { "code":"C41", "desc":"Reconnaissance de dette"},
                { "code":"C42", "desc":"Proposition de règlement Acceptation"},
                { "code":"C43", "desc":"Proposition de règlement Refus"},
                { "code":"C44", "desc":"Renseignements sur les biens immobiliers"},
                { "code":"C45", "desc":"Demande de renseignements sur un détenu"},
                { "code":"C46", "desc":"Réévaluation de votre entente de remboursement"},
                { "code":"C48", "desc":"Régularisation de dossier"},
                { "code":"C50", "desc":"Demande de réévaluation de la réclamation"},
                { "code":"C57", "desc":"Preuve de la réclamation au curateur public"},
                { "code":"C58", "desc":"Autorisation concernant un détenu francophone"},
                { "code":"C59", "desc":"Autorisation concernant un détenu anglophone"},
                { "code":"C62", "desc":"Preuve de réclamation dans une faillite"},
                { "code":"C63", "desc":"Lettre d'amendement Relevé 5 - aaaa"},
                { "code":"C65", "desc":"Confirmation d'engagement de remboursement"},
                { "code":"C66", "desc":"Confirmation d'engagement de remboursement"},
                { "code":"C67", "desc":"Confirmation d'engagement de remboursement"},
                { "code":"C68", "desc":"Engagement de remboursement et préavis de débit préautorisé"},
                { "code":"C69", "desc":"Engagement de remboursement et préavis de débit préautorisé"},
                { "code":"C70", "desc":"Engagement de remboursement et préavis de débit préautorisé"},
                { "code":"C71", "desc":"Engagement de remboursement et préavis de débit préautorisé"},
                { "code":"C72", "desc":"Succession - Demande de renseignements (rappel)"},
                { "code":"C80", "desc":"Avis au prestataire"},
                { "code":"C81", "desc":"Avis au prestataire"},
                { "code":"DDO", "desc":"Demande de documents"},
                { "code":"E05", "desc":"REMBOURSEMENTS EXCÉDENTAIRES"},
                { "code":"J05", "desc":""},
                { "code":"J06", "desc":""},
                { "code":"J07", "desc":""},
                { "code":"J08", "desc":""},
                { "code":"J09", "desc":"Attestation de présence à l'aide sociale"},
                { "code":"J59", "desc":"Évaluation concernant la contribution parentale"},
                { "code":"J60", "desc":""},
                { "code":"J61", "desc":""},
                { "code":"J62", "desc":""},
                { "code":"J63", "desc":"Contribution parentale - Suivi diminution des revenus"},
                { "code":"J64", "desc":"Refus de contribuer"},
                { "code":"J65", "desc":""},
                { "code":"J66", "desc":""},
                { "code":"J67", "desc":""},
                { "code":"J68", "desc":"Contribution parentale - Suivi diminution des revenus"},
                { "code":"J69", "desc":""},
                { "code":"J70", "desc":""},
                { "code":"J71", "desc":""},
                { "code":"J72", "desc":""},
                { "code":"J73", "desc":""},
                { "code":"J74", "desc":""},
                { "code":"J75", "desc":""},
                { "code":"J76", "desc":""},
                { "code":"J77", "desc":""},
                { "code":"J78", "desc":""},
                { "code":"J79", "desc":""},
                { "code":"K07", "desc":"Déclaration mensuelle"},
                { "code":"K09", "desc":"Demande de dépôt direct des prestations"},
                { "code":"K10", "desc":""},
                { "code":"K15", "desc":""},
                { "code":"K16", "desc":""},
                { "code":"K17", "desc":""},
                { "code":"K18", "desc":"Dossier en attente d'un droit réalisable (dossier inactif) suivi"},
                { "code":"K25", "desc":"Conjoint non déclaré Dossier annulé"},
                { "code":"K26", "desc":"Décès non déclaré Dossier annulé"},
                { "code":"K27", "desc":"Renseignements sur votre état civil"},
                { "code":"K28", "desc":"Revenus de votre enfant"},
                { "code":"K29", "desc":"Convocation - Revenus de pension alimentaire non déclarés"},
                { "code":"K45", "desc":""},
                { "code":"K46", "desc":""},
                { "code":"K47", "desc":""},
                { "code":"K70", "desc":"Pouvoir discrétionnaire Remboursable en totalité"},
                { "code":"K71", "desc":"Pouvoir discrétionnaire Mois de la demande remboursable"},
                { "code":"K72", "desc":"Pouvoir discrétionnaire Période d'aide remboursable"},
                { "code":"K73", "desc":"Pouvoir discrétionnaire Prestation spéciale : remboursable"},
                { "code":"K74", "desc":"Pouvoir discrétionnaire Augmentation de l'aide versée"},
                { "code":"K75", "desc":"Pouvoir discrétionnaire Diminution de l'aide versée"},
                { "code":"K76", "desc":"Pouvoir discrétionnaire Augmentation : aide remboursable"},
                { "code":"K77", "desc":"Pouvoir discrétionnaire Diminution : aide remboursable"},
                { "code":"K78", "desc":"Pouvoir discrétionnaire Fin de l'aide remboursable"},
                { "code":"K79", "desc":"Pouvoir discrétionnaire Prestation spéciale"},
                { "code":"K80", "desc":"Pouvoir discrétionnaire Acceptation"},
                { "code":"K81", "desc":"Pouvoir discrétionnaire Acceptation : mois de la demande"},
                { "code":"K82", "desc":"Pouvoir discrétionnaire Acceptation"},
                { "code":"K83", "desc":"Pouvoir discrétionnaire Prestation spéciale acceptée"},
                { "code":"K85", "desc":"Pouvoir discrétionnaire"},
                { "code":"K86", "desc":"Pouvoir discrétionnaire"},
                { "code":"K87", "desc":"Pouvoir discrétionnaire Carnet de réclamation"},
                { "code":"K88", "desc":"Pouvoir discrétionnaire Demande refusée"},
                { "code":"K89", "desc":"Pouvoir discrétionnaire Refus : Étudiant temps plein"},
                { "code":"K90", "desc":"Renseignements sur votre situation financière"},
                { "code":"K93", "desc":"Avis de réclamation"},
                { "code":"K94", "desc":"Avis de réclamation"},
                { "code":"K95", "desc":""},
                { "code":"K96", "desc":""},
                { "code":"K97", "desc":""},
                { "code":"MAI", "desc":"Avis de convocation"},
                { "code":"MAN", "desc":"Avis d'annulation d'une rencontre"},
                { "code":"MRE", "desc":"Avis de modification à une rencontre"},
                { "code":"M01", "desc":""},
                { "code":"M02", "desc":""},
                { "code":"M03", "desc":""},
                { "code":"M04", "desc":""},
                { "code":"M05", "desc":""},
                { "code":"M06", "desc":"Frais de séjour pour traitement en toxicomanie"},
                { "code":"M07", "desc":"Frais de séjour pour traitement en toxicomanie"},
                { "code":"M09", "desc":"Transport médical ou frais de séjour"},
                { "code":"M10", "desc":""},
                { "code":"M11", "desc":"Acceptation prestation spéciale desanté non prévue au Règlement"},
                { "code":"M12", "desc":""},
                { "code":"M13", "desc":"Rapport médical de Retraite Québec"},
                { "code":"M30", "desc":"Référence CLSC"},
                { "code":"M35", "desc":""},
                { "code":"M36", "desc":""},
                { "code":"M37", "desc":"Rente d'invalidité Demande de rente"},
                { "code":"M38", "desc":"Demande de rente de retraite"},
                { "code":"M39", "desc":"Demande de pension Sécurité de la vieillesse"},
                { "code":"M40", "desc":"Demande au Programme d'allocation au survivant"},
                { "code":"M41", "desc":"Demande au Programme d'allocation"},
                { "code":"M42", "desc":"Demande de versements du supplément à la prime au travail"},
                { "code":"M43", "desc":"Demande incomplète du supplément à la prime au travail"},
                { "code":"M44", "desc":"Demande de versements du supplément à la prime au travail"},
                { "code":"M45", "desc":"Confirmation du nombre de mois d'aide financière"},
                { "code":"M50", "desc":""},
                { "code":"M51", "desc":""},
                { "code":"M60", "desc":""},
                { "code":"M61", "desc":""},
                { "code":"M70", "desc":"Réexamen - Contraintes sévères à l'emploi"},
                { "code":"M71", "desc":"Réexamen - Contraintes sévères à l'emploi - 2e avis"},
                { "code":"M72", "desc":"Programme de solidarité sociale maintenu"},
                { "code":"M80", "desc":"Ajustement pour personnes seules Programme Allocation-logement"},
                { "code":"M81", "desc":""},
                { "code":"M82", "desc":""},
                { "code":"M83", "desc":""},
                { "code":"M84", "desc":""},
                { "code":"M85", "desc":""},
                { "code":"M86", "desc":""},
                { "code":"Q01", "desc":"Mesure Action emploi Acceptation de votre demande"},
                { "code":"Q02", "desc":"Mesure action emploi Refus de votre demande"},
                { "code":"Q03", "desc":"Mesure Action emploi Demande de documents"},
                { "code":"Q04", "desc":"Mesure Action emploi Période de maintien"},
                { "code":"Q05", "desc":"Mesure action emploi Fin de participation"},
                { "code":"R05", "desc":"RELEVÉ 5 MODIFIÉ"},
                { "code":"R06", "desc":"RELEVÉ 5 DUPLICATA"},
                { "code":"R07", "desc":"RELEVÉ 5 DUPLICATA"},
                { "code":"R08", "desc":"RELEVÉ 5 DUPLICATA"},
                { "code":"R10", "desc":"LETTRE DE REMBOURSEMENT"},
                { "code":"R11", "desc":"LETTRE DE REMBOURSEMENT"},
                { "code":"R12", "desc":"LETTRE DE REMBOURSEMENT"}]
        }
       
    </script>

}